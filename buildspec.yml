version: 0.2
phases:
  install:
    commands:
      - gem install jekyll bundler
      - echo "****** Install Yarn And NodeJS ******"
      - curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add - echo "deb https://dl.yarnpkg.com/debian/ stable main" | sudo tee /etc/apt/sources.list.d/yarn.list
      - echo ""****** Update nodeJs and Yarn "******"
      - sudo apt-get update && sudo apt-get install yarn

  pre_build:
    commands:
      - bundle install
      - yarn install
  build:
    commands:
      - echo "******* Building Jekyll site *******"
      - cd docs2/
      - jenkyll build
      - echo "******* Uploading to S3 *******"
      - aws s3 sync _site/ botpress-docs
  # post_build:
    #commands:
      # - command
      # - command
#artifacts:
  #files:
    # - location
    # - location
  #discard-paths: yes
  #base-directory: location