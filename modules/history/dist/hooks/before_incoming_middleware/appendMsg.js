"use strict";

const appendMsg = async () => {
  if (!event.state.session["previous-msg"]) {
    event.state.session["previous-msg"] = [];
  }

  if (event.payload.type === "text") {
    event.state.session["previous-msg"].push(event.payload.text);
    await bp.database("msg_history").insert({
      "msg": event.payload.text
    });
  }
};

return appendMsg();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcGVuZE1zZy5qcyJdLCJuYW1lcyI6WyJhcHBlbmRNc2ciLCJldmVudCIsInN0YXRlIiwic2Vzc2lvbiIsInBheWxvYWQiLCJ0eXBlIiwicHVzaCIsInRleHQiLCJicCIsImRhdGFiYXNlIiwiaW5zZXJ0Il0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLFNBQVMsR0FBRyxZQUFZO0FBQzVCLE1BQUksQ0FBQ0MsS0FBSyxDQUFDQyxLQUFOLENBQVlDLE9BQVosQ0FBb0IsY0FBcEIsQ0FBTCxFQUEwQztBQUN4Q0YsSUFBQUEsS0FBSyxDQUFDQyxLQUFOLENBQVlDLE9BQVosQ0FBb0IsY0FBcEIsSUFBc0MsRUFBdEM7QUFDRDs7QUFDRCxNQUFJRixLQUFLLENBQUNHLE9BQU4sQ0FBY0MsSUFBZCxLQUF1QixNQUEzQixFQUFtQztBQUNqQ0osSUFBQUEsS0FBSyxDQUFDQyxLQUFOLENBQVlDLE9BQVosQ0FBb0IsY0FBcEIsRUFBb0NHLElBQXBDLENBQXlDTCxLQUFLLENBQUNHLE9BQU4sQ0FBY0csSUFBdkQ7QUFDQSxVQUFNQyxFQUFFLENBQUNDLFFBQUgsQ0FBWSxhQUFaLEVBQTJCQyxNQUEzQixDQUFrQztBQUFFLGFBQU9ULEtBQUssQ0FBQ0csT0FBTixDQUFjRztBQUF2QixLQUFsQyxDQUFOO0FBQ0Q7QUFDRixDQVJEOztBQVVBLE9BQU9QLFNBQVMsRUFBaEIiLCJzb3VyY2VSb290IjoiL2hvbWUvZnJhbmNvaXMvRG9jdW1lbnRzL2JvdHByZXNzLXJvb3QvYm90cHJlc3MvbW9kdWxlcy9oaXN0b3J5L3NyYy9iYWNrZW5kIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYXBwZW5kTXNnID0gYXN5bmMgKCkgPT4ge1xuICBpZiAoIWV2ZW50LnN0YXRlLnNlc3Npb25bXCJwcmV2aW91cy1tc2dcIl0pIHtcbiAgICBldmVudC5zdGF0ZS5zZXNzaW9uW1wicHJldmlvdXMtbXNnXCJdID0gW11cbiAgfVxuICBpZiAoZXZlbnQucGF5bG9hZC50eXBlID09PSBcInRleHRcIikge1xuICAgIGV2ZW50LnN0YXRlLnNlc3Npb25bXCJwcmV2aW91cy1tc2dcIl0ucHVzaChldmVudC5wYXlsb2FkLnRleHQpXG4gICAgYXdhaXQgYnAuZGF0YWJhc2UoXCJtc2dfaGlzdG9yeVwiKS5pbnNlcnQoeyBcIm1zZ1wiOiBldmVudC5wYXlsb2FkLnRleHQgfSlcbiAgfVxufVxuXG5yZXR1cm4gYXBwZW5kTXNnKClcblxuIl19