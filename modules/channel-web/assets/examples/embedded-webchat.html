<html>
  <head>
    <title>Embedded Webchat</title>
    <!-- Set the base URL to access this page, for example: /botpress/
    It must match the path configured as an externalUrl in Botpress config, and in the init method -->
    <base href="/" />
    <script src="assets/modules/channel-web/inject.js"></script>
  </head>

  <body>
    <p>This is an example of embedded webchat. Try adding your "botId" as a URL parameter.</p>
    <p>
      Example: <code>https://botpress.team/assets/modules/channel-web/examples/embedded-webchat.html?botId=test</code>
    </p>
  </body>

  <script>
    function parseQuery(queryString) {
      var query = {}
      var pairs = (queryString[0] === '?' ? queryString.substr(1) : queryString).split('&')
      for (var i = 0; i < pairs.length; i++) {
        var pair = pairs[i].split('=')
        query[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1] || '')
      }
      return query
    }

    var params = parseQuery(window.location && window.location.search)

    const botId = (params && params.botId) || 'welcome-bot'

    window.botpressWebChat.init({
      host: 'http://localhost:3000',
      botId: botId
      /*
        To change the styling of the webchat, you can either edit directly default.css, or use the extraStylesheet property.
        This allows you to customize the chat on a per-bot basis.
      */
      //extraStylesheet: 'assets/modules/channel-web/examples/my-theme.css'
    })
  </script>
</html>
